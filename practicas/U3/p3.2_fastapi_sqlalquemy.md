# PrÃ¡ctica: API REST con FastAPI y base de datos persistente

## Objetivo de la prÃ¡ctica

El objetivo de esta prÃ¡ctica es diseÃ±ar y desarrollar una **API REST de datos** utilizando **FastAPI**, aplicando una arquitectura organizada y accediendo a una **base de datos relacional persistente** mediante **SQLAlchemy**.

El proyecto podrÃ¡ servir como **backend** para futuros desarrollos de frontend en la asignatura de **DWEC**.

---

## DescripciÃ³n general

El alumnado deberÃ¡ crear una API REST que gestione un **sistema de informaciÃ³n** de temÃ¡tica libre (por ejemplo: tienda online, biblioteca, gestiÃ³n acadÃ©mica, reservas, catÃ¡logo de productos, etc.).

La API deberÃ¡:

- Gestionar **al menos dos recursos distintos**, que se correspondan con **dos tablas relacionadas o coherentes dentro del mismo sistema**
- Acceder a una base de datos **SQLite** con persistencia
- Estar organizada en **mÃ³dulos y carpetas** siguiendo buenas prÃ¡cticas
- Validar datos mediante **Pydantic**
- Gestionar errores usando **HTTPException**

Se permite:

- Extender la API realizada en la prÃ¡ctica anterior
- O crear un proyecto nuevo desde cero

---

## Requisitos funcionales

### 1. Recursos (tablas)

El sistema debe incluir **al menos dos entidades distintas**, por ejemplo:

- Usuarios y pedidos
- Productos y categorÃ­as
- Libros y autores
- Alumnos y cursos
- Clientes y reservas

Cada entidad deberÃ¡:

- Tener una tabla propia en la base de datos
- Tener al menos **5 campos**, incluyendo el identificador (`id`)
- Usar tipos de datos variados (int, str, float, bool, etc.)

---

### 2. Operaciones CRUD

Para cada recurso se deberÃ¡n implementar, como mÃ­nimo:

- Obtener todos los registros
- Obtener un registro por su `id`
- Crear un nuevo registro
- Actualizar un registro existente
- Eliminar un registro

---

### 3. Base de datos y persistencia

- Se debe usar **SQLite** como base de datos principal
- La base de datos debe ser **persistente** (archivo `.db`)
- Se debe acceder a la base de datos mediante **SQLAlchemy (ORM)**
- Los identificadores (`id`) deben ser **autogenerados por la base de datos**

> ğŸ”¹ **AmpliaciÃ³n opcional**:  
> El alumnado que lo desee podrÃ¡ configurar la conexiÃ³n a otro sistema gestor de bases de datos relacional (por ejemplo **MySQL** o **PostgreSQL**), manteniendo la misma estructura del proyecto.

---

### 4. ValidaciÃ³n de datos

- Se deberÃ¡n definir **modelos Pydantic** separados de los modelos ORM
- Al menos:
  - Un modelo base
  - Un modelo para creaciÃ³n
  - Un modelo para respuesta
- La API debe validar automÃ¡ticamente los datos de entrada

---

### 5. GestiÃ³n de errores

- Se debe usar `HTTPException` para:
  - Recursos no encontrados
  - Datos incorrectos
  - Conflictos (por ejemplo, intentar crear un recurso duplicado)

---

## 6. ConfiguraciÃ³n de CORS para acceso desde frontend

La API deberÃ¡ estar preparada para ser consumida desde una aplicaciÃ³n frontend (por ejemplo, **React**), por lo que serÃ¡ necesario **gestionar correctamente el CORS** (_Cross-Origin Resource Sharing_).

## OrganizaciÃ³n del proyecto

El proyecto debe estar organizado en carpetas de forma clara, por ejemplo:

```
app/
â”œâ”€â”€ main.py
â”œâ”€â”€ database/
â”‚ â””â”€â”€ database.py
â”œâ”€â”€ models/
â”‚ â””â”€â”€ _.py
â”œâ”€â”€ schemas/
â”‚ â””â”€â”€ _.py
â”œâ”€â”€ routes/
â”‚ â””â”€â”€ \*.py
```

---

## EjecuciÃ³n de la aplicaciÃ³n

La aplicaciÃ³n deberÃ¡ poder ejecutarse correctamente en un entorno virtual usando:

```
fastapi dev main.py
```

---

## Criterios de evaluaciÃ³n

Se valorarÃ¡:

- Correcta implementaciÃ³n de FastAPI y SQLAlchemy
- Uso adecuado de Pydantic para validaciÃ³n
- OrganizaciÃ³n y limpieza del cÃ³digo
- Uso correcto de sesiones y dependencias (`Depends(get_db)`)
- Correcta gestiÃ³n de errores HTTP
- Funcionamiento real de la persistencia de datos
- CreaciÃ³n de un **middleware CORS** para permitir el acceso de nuestras aplicaciones frontend.

---

## Entrega

El alumnado deberÃ¡ entregar:

- El cÃ³digo fuente completo del proyecto en un repositorio de de Github donde se vea con varios commits la evoluciÃ³n del cÃ³digo
- Un breve documento README.md o comentario explicando:
  - La temÃ¡tica elegida
  - Las entidades creadas
  - Si se ha realizado alguna ampliaciÃ³n opcional

---
